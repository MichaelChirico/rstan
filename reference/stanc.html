<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Translate Stan model specification to C++ code — stanc • rstan</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Translate Stan model specification to C++ code — stanc"><meta property="og:description" content="Translate a model specification in Stan code to C++ code, which can
  then be compiled and loaded for sampling."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rstan</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.26.24</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="https://mc-stan.org/bayesplot" class="external-link">bayesplot</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan" class="external-link">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo" class="external-link">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred" class="external-link">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul></li>
<li>
  <a href="https://mc-stan.org" class="external-link">Stan</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://twitter.com/mcmc_stan" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/rstan" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/" class="external-link">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Translate Stan model specification to C++ code</h1>
    
    <div class="hidden name"><code>stanc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Translate a model specification in Stan code to C++ code, which can
  then be compiled and loaded for sampling.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">stanc</span><span class="op">(</span></span>
<span>    <span class="va">file</span>, model_code <span class="op">=</span> <span class="st">''</span>, model_name <span class="op">=</span> <span class="st">"anon_model"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    obfuscate_model_name <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    allow_undefined <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"stanc.allow_undefined"</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    allow_optimizations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"stanc.allow_optimizations"</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    standalone_functions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"stanc.standalone_functions"</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    use_opencl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"stanc.use_opencl"</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    warn_pedantic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"stanc.warn_pedantic"</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    warn_uninitialized <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"stanc.warn_uninitialized"</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    isystem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/missing.html" class="external-link">missing</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">dirname</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">stanc_builder</span><span class="op">(</span></span>
<span>    <span class="va">file</span>, isystem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">dirname</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    verbose <span class="op">=</span> <span class="cn">FALSE</span>, obfuscate_model_name <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    allow_undefined <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"stanc.allow_undefined"</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    allow_optimizations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"stanc.allow_optimizations"</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    standalone_functions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"stanc.standalone_functions"</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    use_opencl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"stanc.use_opencl"</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    warn_pedantic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"stanc.warn_pedantic"</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    warn_uninitialized <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Logic.html" class="external-link">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"stanc.warn_uninitialized"</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>file</dt>
<dd><p>A character string or a connection that <span style="R">R</span> supports
    specifying the Stan model specification in Stan's modeling language.</p></dd>

  <dt>model_code</dt>
<dd><p>Either a character string containing a Stan model
    specification or the name of a character string object in the workspace.
    This parameter is used only if parameter <code>file</code> is not specified,
    so it defaults to the empty string.</p></dd>

  <dt>model_name</dt>
<dd><p>A character string naming the model. The
    default is <code>"anon_model"</code>. However, the model name will be derived
    from <code>file</code> or <code>model_code</code> (if <code>model_code</code> is the name of a
    character string object) if <code>model_name</code> is not specified.</p></dd>

  <dt>verbose</dt>
<dd><p>Logical, defaulting to <code>FALSE</code>. If <code>TRUE</code>
    more intermediate information is printed during the translation procedure.</p></dd>

  <dt>obfuscate_model_name</dt>
<dd><p>Logical, defaulting to <code>TRUE</code>,
    indicating whether to use a randomly-generated character string for the
    name of the C++ class. This prevents name clashes when compiling multiple
    models in the same R session.</p></dd>

  <dt>isystem</dt>
<dd><p>A character vector naming a path to look for
    file paths in <code>file</code> that are to be included within the Stan program
    named by <code>file</code>. See the Details section below.</p></dd>

  <dt>allow_undefined</dt>
<dd><p>A logical scalar defaulting to <code>FALSE</code> indicating
    whether to allow Stan functions to be declared but not defined in <code>file</code>
    or <code>model_code</code>. If <code>TRUE</code>, then it is the caller's responsibility
    to provide a function definition in another header file or linked shared object.</p></dd>

  <dt>allow_optimizations</dt>
<dd><p>A logical scalar defaulting to <code>FALSE</code> indicating
    whether to allow level-1 compiler optimization to the <span class="pkg">Stan</span> code.</p></dd>

  <dt>standalone_functions</dt>
<dd><p>A logical scalar defaulting to <code>FALSE</code> indicating
    whether to generate the standalone functions <span class="pkg">C++</span> code.</p></dd>

  <dt>use_opencl</dt>
<dd><p>A logical scalar defaulting to <code>FALSE</code> indicating
    whether to try to use <code>matrix_cl</code> signatures.</p></dd>

  <dt>warn_pedantic</dt>
<dd><p>A logical scalar defaulting to <code>FALSE</code> indicating
    whether to emit warnings about common mistakes in <span class="pkg">Stan</span> programs.</p></dd>

  <dt>warn_uninitialized</dt>
<dd><p>A logical scalar defaulting to <code>FALSE</code> indicating
    whether emit warnings about uninitialized variables.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The <code>stanc_builder</code> function supports the standard C++ convention of
  specifying something like <code>#include "my_includes.txt"</code> on an entire line
  within the file named by the <code>file</code> argument. In other words,
  <code>stanc_builder</code> would look for <code>"my_includes.txt"</code> in (or under) the
  directories named by the <code>isystem</code> argument and --- if found --- insert its
  contents verbatim at that position before calling <code>stanc</code> on the resulting
  <code>model_code</code>. This mechanism reduces the need to copy common chunks of code
  across Stan programs. It is possible to include such files recursively.</p>
<p>Note that line numbers referred to in parser warnings or errors refer to the
  postprocessed Stan program rather than <code>file</code>. In the case of a parser
  error, the postprocessed Stan program will be printed after the error message.
  Line numbers referred to in messages while Stan is executing also refer to
  the postprocessed Stan program which can be obtained by calling
  <code><a href="stanfit-class.html">get_stancode</a></code>.</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    

<p>A list with named entries:</p>
<p></p>
<ol><li><p><code>model_name</code> Character string for the model name.</p></li>
<li><p><code>model_code</code> Character string for the model's Stan specification.</p></li>
<li><p><code>cppcode</code>    Character string for the model's C++ code.</p></li>
<li><p><code>status</code>     Logical indicating success/failure (always <code>TRUE</code>)
                            of translating the Stan code.</p></li>
</ol></div>
    <div id="note">
    <h2>Note</h2>
    <p>Unlike <span style="R">R</span>, in which variable identifiers may contain dots (e.g. <code>a.1</code>),
  Stan prohibits dots from occurring in variable identifiers. Furthermore,
  C++ reserved words and Stan reserved words may not be used for variable names;
  see the Stan User's Guide for a complete list.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>The Stan Development Team
  <em>Stan Modeling Language User's Guide and Reference Manual</em>.
  <a href="https://mc-stan.org/" class="external-link">https://mc-stan.org/</a>.</p>
<p>The Stan Development Team
  <em>CmdStan Interface User's Guide</em>.
  <a href="https://mc-stan.org" class="external-link">https://mc-stan.org</a>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="stan_model.html">stan_model</a></code> and <code><a href="stan.html">stan</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">stanmodelcode</span> <span class="op">&lt;-</span> <span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">data {</span></span></span>
<span class="r-in"><span><span class="st">  int&lt;lower=0&gt; N;</span></span></span>
<span class="r-in"><span><span class="st">  real y[N];</span></span></span>
<span class="r-in"><span><span class="st">}</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st">parameters {</span></span></span>
<span class="r-in"><span><span class="st">  real mu;</span></span></span>
<span class="r-in"><span><span class="st">}</span></span></span>
<span class="r-in"><span><span class="st"></span></span></span>
<span class="r-in"><span><span class="st">model {</span></span></span>
<span class="r-in"><span><span class="st">  mu ~ normal(0, 10);</span></span></span>
<span class="r-in"><span><span class="st">  y ~ normal(mu, 1);</span></span></span>
<span class="r-in"><span><span class="st">}</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu">stanc</span><span class="op">(</span>model_code <span class="op">=</span> <span class="va">stanmodelcode</span>, model_name <span class="op">=</span> <span class="st">"normal1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ status       : logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ model_cppname: chr "modele56e75c20f49_normal1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ cppcode      : chr "#ifndef USE_STANC3\n#define USE_STANC3\n#endif\n// Code generated by stanc v2.26.1-4-gd72b68b7-dirty\n#include "| __truncated__</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ model_name   : chr "normal1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ model_code   : chr "data {\n  int&lt;lower=0&gt; N;\n  real y[N];\n}\nparameters {\n  real mu;\n}\nmodel {\n  mu ~ normal(0, 10);\n  y ~ "| __truncated__</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..- attr(*, "model_name2")= chr "filee56e4c7291cc"</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jiqiang Guo, Jonah Gabry, Ben Goodrich, Andrew Johnson, Sebastian Weber.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

