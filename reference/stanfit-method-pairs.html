<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a matrix of output plots from a stanfit object — pairs.stanfit • rstan</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create a matrix of output plots from a stanfit object — pairs.stanfit"><meta property="og:description" content="A pairs method that is customized for MCMC output"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rstan</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.26.24</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://mc-stan.org/rstanarm">rstanarm</a>
    </li>
    <li>
      <a href="https://mc-stan.org/bayesplot" class="external-link">bayesplot</a>
    </li>
    <li>
      <a href="https://mc-stan.org/shinystan" class="external-link">shinystan</a>
    </li>
    <li>
      <a href="https://mc-stan.org/loo" class="external-link">loo</a>
    </li>
    <li>
      <a href="https://mc-stan.org/projpred" class="external-link">projpred</a>
    </li>
    <li>
      <a href="https://mc-stan.org/rstantools">rstantools</a>
    </li>
  </ul></li>
<li>
  <a href="https://mc-stan.org" class="external-link">Stan</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://twitter.com/mcmc_stan" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/stan-dev/rstan" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://discourse.mc-stan.org/" class="external-link">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a matrix of output plots from a <code>stanfit</code> object</h1>
    
    <div class="hidden name"><code>stanfit-method-pairs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A <code><a href="https://rdrr.io/r/graphics/pairs.html" class="external-link">pairs</a></code> method that is customized for MCMC output</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for stanfit</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/pairs.html" class="external-link">pairs</a></span><span class="op">(</span><span class="va">x</span>, labels <span class="op">=</span> <span class="cn">NULL</span>, panel <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span>, </span>
<span>    lower.panel <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>    upper.panel <span class="op">=</span> <span class="cn">NULL</span>, diag.panel <span class="op">=</span> <span class="cn">NULL</span>, text.panel <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>    label.pos <span class="op">=</span> <span class="fl">0.5</span> <span class="op">+</span> <span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, cex.labels <span class="op">=</span> <span class="cn">NULL</span>, font.labels <span class="op">=</span> <span class="fl">1</span>, </span>
<span>    row1attop <span class="op">=</span> <span class="cn">TRUE</span>, gap <span class="op">=</span> <span class="fl">1</span>, log <span class="op">=</span> <span class="st">""</span>, pars <span class="op">=</span> <span class="cn">NULL</span>, include <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    condition <span class="op">=</span> <span class="st">"accept_stat__"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>An object of S4 class <code>stanfit</code></p></dd>

  <dt>labels, panel, ..., lower.panel, upper.panel, diag.panel</dt>
<dd><p>Same as in 
    <code><a href="https://rdrr.io/r/graphics/pairs.html" class="external-link">pairs</a></code> syntactically but see the Details section for different
    default arguments</p></dd>

  <dt>text.panel, label.pos, cex.labels, font.labels, row1attop, gap</dt>
<dd><p>Same as in <code><a href="https://rdrr.io/r/graphics/pairs.html" class="external-link">pairs.default</a></code></p></dd>

  <dt>log</dt>
<dd><p>Same as in <code><a href="https://rdrr.io/r/graphics/pairs.html" class="external-link">pairs.default</a></code>, which makes it possible to
    utilize logarithmic axes and additionally accepts <code>log = TRUE</code>. See the
    Details section.</p></dd>

  <dt>pars</dt>
<dd><p>If not <code>NULL</code>, a character vector indicating which quantities
    to include in the plots, which is passed to <code><a href="stanfit-method-extract.html">extract</a></code>. Thus,
    by default, all unknown quantities are included, which may be far too many
    to visualize on a small computer screen. If <code>include = FALSE</code>, then
    the named parameters are excluded from the plot.</p></dd>

  <dt>condition</dt>
<dd><p>If <code>NULL</code>, it will plot roughly half of the
    chains in the lower panel and the rest in the upper panel. An
    integer vector can be passed to select some subset of the chains, of which
    roughly half will be plotted in the lower panel and the rest in the upper
    panel. A list of two integer vectors can be passed, each specifying a subset
    of the chains to be plotted in the lower and upper panels respectively.</p>    
<p>A single number between zero and one exclusive can be passed, which is 
    interpreted as the proportion of realizations (among all chains) to plot
    in the lower panel starting with the first realization in each chain, 
    with the complement (from the end of each chain) plotted in the upper panel.</p>    
<p>A (possibly abbreviated) character vector of length one can be passed among 
    <code>"accept_stat__", "stepsize__"</code>, <code>"treedepth__", "n_leapfrog__"</code>,
    <code>"divergent__"</code>,, <code>"energy__"</code>, or <code>"lp__"</code>, which are the 
    variables produced by <code><a href="stanfit-class.html">get_sampler_params</a></code> and 
    <code><a href="stanfit-class.html">get_logposterior</a></code>. In that case the lower panel will plot 
    realizations that are below the median of the indicated variable (or are zero 
    in the case of <code>"divergent__"</code>) and the upper panel will plot realizations 
    that are greater than or equal to the median of the indicated variable (or are 
    one in the case of <code>"divergent__"</code>). 
    Finally, any logical vector whose length is equal to the product of the number 
    of iterations and the number of chains can be passed, in which case realizations
    corresponding to <code>FALSE</code> and <code>TRUE</code> will be plotted in the lower 
    and upper panel respectively. The default is <code>"accept_stat__"</code>.</p></dd>

  <dt>include</dt>
<dd><p>Logical scalar indicating whether to include (the default) or
    exclude the parameters named in the <code>pars</code> argument from the plot.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>This method differs from the default <code><a href="https://rdrr.io/r/graphics/pairs.html" class="external-link">pairs</a></code> method in the following
  ways. If unspecified, the <code><a href="https://rdrr.io/r/graphics/smoothScatter.html" class="external-link">smoothScatter</a></code> function is used for the
  off-diagonal plots, rather than <code><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></code>, since the former is more
  appropriate for visualizing thousands of draws from a posterior distribution.
  Also, if unspecified, histograms of the marginal distribution of each quantity
  are placed on the diagonal of the plot, after pooling all of the chains specified
  by the <code>chain\_id</code> argument.</p>  
<p>The draws from the warmup phase are always discarded before plotting.</p>  
<p>By default, the lower (upper) triangle of the plot contains draws with below
  (above) median acceptance probability. Also, if <code>condition</code> is not
  <code>"divergent__"</code>, red points will be superimposed onto the smoothed
  density plots indicating which (if any) iterations encountered a divergent 
  transition. Otherwise, yellow points indicate a transition that hit the
  maximum treedepth rather than terminated its evolution normally.</p>  
<p>You may very well want to specify the <code>log</code> argument for non-negative
  parameters. However, the <code>pairs</code> function will drop (with a message)
  parameters that are either constant or duplicative with previous parameters.
  For example, if a correlation matrix is included among <code>pars</code>, then 
  neither its diagonal elements (which are always 1) nor its upper triangular
  elements (which are the same as the corresponding lower triangular elements)
  will be included. Thus, if <code>log</code> is an integer vector, it needs to
  pertain to the parameters after constant and duplicative ones are dropped.
  It is perhaps easiest to specify <code>log = TRUE</code>, which will utilize
  logarithmic axes for all non-negative parameters, except <code>lp__</code> and
  any integer valued quantities.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>S4 class <code><a href="stanfit-class.html">stanfit</a></code> and its method <code><a href="stanfit-method-extract.html">extract</a></code> as
  well as the <code><a href="https://rdrr.io/r/graphics/pairs.html" class="external-link">pairs</a></code> generic function. Also, see
  <code><a href="stanfit-class.html">get_sampler_params</a></code> and <code><a href="stanfit-class.html">get_logposterior</a></code>.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/example.html" class="external-link">example</a></span><span class="op">(</span><span class="va">read_stan_csv</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rd_st_&gt; csvfiles &lt;- dir(system.file('misc', package = 'rstan'),</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rd_st_+                 pattern = 'rstan_doc_ex_[0-9].csv', full.names = TRUE)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rd_st_&gt; fit &lt;- read_stan_csv(csvfiles)</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/pairs.html" class="external-link">pairs</a></span><span class="op">(</span><span class="va">fit</span>, pars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mu"</span>, <span class="st">"sigma"</span>, <span class="st">"alpha"</span>, <span class="st">"lp__"</span><span class="op">)</span>, log <span class="op">=</span> <span class="cn">TRUE</span>, las <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>argument 1 does not name a graphical parameter</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>argument 1 does not name a graphical parameter</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>argument 1 does not name a graphical parameter</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>argument 1 does not name a graphical parameter</span>
<span class="r-plt img"><img src="stanfit-method-pairs-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># sigma and alpha will have logarithmic axes</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jiqiang Guo, Jonah Gabry, Ben Goodrich, Andrew Johnson, Sebastian Weber.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

